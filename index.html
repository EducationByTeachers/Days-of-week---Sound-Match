<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Days - Sound Match</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f7fb;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .screen { display: none; text-align: center; }
    #startScreen { display: block; }
    .card {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,.1);
      width: 850px;
    }
    h1 { margin-top: 0; }
    p { color: #555; }
    .btn {
      background: #007BFF;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin: 10px;
    }
    .layout {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 20px;
    }
    .column {
      display: grid;
      grid-template-rows: repeat(7, 1fr);
      gap: 6px;
    }
    .sound {
      background: #16a34a;
      color: white;
      border-radius: 8px;
      font-weight: bold;
      padding: 6px;
      text-align: center;
      cursor: pointer;
    }
    .sound.used { opacity: 0.5; cursor: not-allowed; }
    .cell {
      background: #fff8dc;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-weight: bold;
      text-align: center;
      padding: 6px;
    }
    .cell.correct {
      background: #d1fae5;
      border-color: #16a34a;
      color: #065f46;
    }
    #goodJob {
      display: none;
      font-size: 4em;
      color: #16a34a;
      margin-top: 20px;
      font-weight: bold;
    }
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
    }
  </style>
</head>
<body>

<div id="startScreen" class="screen">
  <div class="card">
    <h1>Days - Sound Match</h1>
    <p>Drag each sound button to the correct Spanish day.</p>
    <button class="btn" onclick="startGame()">Start</button>
  </div>
</div>

<div id="gameScreen" class="screen">
  <div class="card">
    <h1>Days - Sound Match</h1>
    <div class="layout">
      <div id="soundList" class="column"></div>
      <div id="spanishGrid" class="column"></div>
    </div>
    <button class="btn" onclick="restartGame()">Restart</button>
    <div id="goodJob">GOOD JOB!</div>
  </div>
</div>

<canvas id="confetti"></canvas>

<script>
const EN = ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];
const ES = ["Lunes","Martes","MiÃ©rcoles","Jueves","Viernes","SÃ¡bado","Domingo"];

let matches = 0;
let confettiInterval;

function startGame(){
  document.getElementById('startScreen').style.display = 'none';
  document.getElementById('gameScreen').style.display = 'block';
  initGame();
}

// Mezclar array
function shuffle(array){
  return array.slice().sort(()=>Math.random()-0.5);
}

function initGame(){
  matches = 0;
  document.getElementById('goodJob').style.display = 'none';
  stopConfetti();

  const soundList = document.getElementById('soundList');
  const spanishGrid = document.getElementById('spanishGrid');
  soundList.innerHTML = '';
  spanishGrid.innerHTML = '';

  // Botones de sonido para cada dÃ­a en espaÃ±ol
  ES.forEach(day => {
    const soundBtn = document.createElement('div');
    soundBtn.className = 'sound';
    soundBtn.textContent = 'ðŸ”Š';
    soundBtn.setAttribute('data-es', day);
    soundBtn.addEventListener('click', ()=>playSound(day));
    soundBtn.draggable = true;
    soundBtn.addEventListener('dragstart', e=> e.dataTransfer.setData('text/plain', day));
    soundList.appendChild(soundBtn);
  });

  // Mostrar los dÃ­as en espaÃ±ol en orden aleatorio
  shuffle(ES).forEach(day => {
    const cell = document.createElement('div');
    cell.className = 'cell';
    cell.textContent = day;
    cell.setAttribute('data-es', day);
    cell.addEventListener('dragover', e=> e.preventDefault());
    cell.addEventListener('drop', e=> dropHandler(e, cell));
    spanishGrid.appendChild(cell);
  });
}

function playSound(text){
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = "es-ES";
  speechSynthesis.speak(utterance);
}

function dropHandler(e, cell){
  e.preventDefault();
  if(cell.classList.contains('correct')) return;
  const soundDay = e.dataTransfer.getData('text/plain');
  const esName = cell.getAttribute('data-es');
  if(soundDay === esName){
    cell.classList.add('correct');
    const btn = [...document.querySelectorAll('.sound')].find(b => b.getAttribute('data-es')===soundDay);
    btn.classList.add('used'); btn.draggable=false;
    matches++;
    if(matches === 7) celebrate();
  } else {
    alert("Error â€“ Try again!");
  }
}

function celebrate(){
  document.getElementById('goodJob').style.display='block';
  startConfetti();
}

function restartGame(){ initGame(); }

function startConfetti(){
  const canvas = document.getElementById('confetti');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  let confetti = [];
  for(let i=0;i<300;i++){
    confetti.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height - canvas.height,
      r: Math.random()*6+4,
      d: Math.random()*0.5+0.5,
      color:`hsl(${Math.random()*360},100%,50%)`
    });
  }
  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    confetti.forEach(c=>{
      ctx.beginPath();
      ctx.arc(c.x,c.y,c.r,0,Math.PI*2,false);
      ctx.fillStyle=c.color;
      ctx.fill();
      c.y+=c.d;
      if(c.y>canvas.height){ c.y=-10; c.x=Math.random()*canvas.width; }
    });
  }
  confettiInterval = setInterval(draw, 20);
}

function stopConfetti(){
  clearInterval(confettiInterval);
  const canvas = document.getElementById('confetti');
  const ctx = canvas.getContext('2d');
  ctx.clearRect(0,0,canvas.width,canvas.height);
}
</script>
</body>
</html>
